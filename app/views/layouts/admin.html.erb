<!DOCTYPE html>
<html lang="en" class="admin-login-theme">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "Admin - Bullet Services" %></title>
    <link rel="icon" type="image/png" href="<%= asset_path('BLogo.png') %>">
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag "fonts", "admin_theme_variables", "admin_login", "data-turbo-track": "reload" %>
    <%= javascript_tag nonce: true do %>
      (function() {
        var s = localStorage.getItem('avo-theme');
        var d = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (s ? s === 'dark' : d) { document.documentElement.classList.add('dark'); }
      })();
    <% end %>
  </head>
  <body>
    <div class="admin-theme-toggle" title="Toggle dark/light mode">
      <button type="button" id="admin-theme-toggle" aria-label="Toggle theme">
        <span class="theme-icon sun-icon" aria-hidden="true">‚òÄÔ∏è</span>
        <span class="theme-icon moon-icon" aria-hidden="true">üåô</span>
      </button>
    </div>
    <div class="admin-container">
      <div class="admin-header">
        <div class="logo-container">
          <%= image_tag "bll-logo_white.svg", alt: "Bullet Services", class: "logo logo-light" %>
          <%= image_tag "bll-logo.svg", alt: "Bullet Services", class: "logo logo-dark" %>
        </div>
        <h1><%= content_for?(:page_title) ? yield(:page_title) : "Admin Portal" %></h1>
        <% if content_for?(:page_subtitle) %>
          <p><%= yield(:page_subtitle) %></p>
        <% else %>
          <p>Bullet Services Administration</p>
        <% end %>
      </div>
      <div class="admin-content">
        <%= yield %>
      </div>
    </div>
    <script>
      (function() {
        var btn = document.getElementById('admin-theme-toggle');
        if (!btn) return;
        function applyTheme(dark) {
          document.documentElement.classList.toggle('dark', dark);
          localStorage.setItem('avo-theme', dark ? 'dark' : 'light');
        }
        btn.addEventListener('click', function() {
          var isDark = document.documentElement.classList.contains('dark');
          applyTheme(!isDark);
        });
      })();
    </script>
  </body>
</html>
